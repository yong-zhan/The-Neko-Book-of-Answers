<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>ç­”æ¡ˆå–µ~o( =âˆ©Ï‰âˆ©= )m</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="./img/favicon.ico" />
</head>
<body>
  <div class="container">
    <h1>ç­”æ¡ˆå–µ^<span class="cat-paw">ğŸ¾</span></h1>
	<h3>çœŸæ­£ç­”æ¡ˆåœ¨ä½ å¿ƒä¸­</h3>
    <input type="text" id="questionInput" placeholder="åœ¨æ­¤é—®å‡ºä½ çš„ç–‘é—®â€¦" autocomplete="off" />
    <button id="askBtn">å¬å”¤ç­”æ¡ˆ</button>
    <div id="answerArea"></div>
	<div class="input-wrapper">
		<!-- <input id="questionInput" type="text" placeholder="åœ¨æ­¤é—®å‡ºä½ çš„ç–‘é—®â€¦" /> -->
		<span class="cat-icon">ğŸ±</span>
		  <div id="music-toggle" title="ç‚¹å‡»åˆ‡æ¢éŸ³ä¹">ğŸµ</div>  <!-- æ§åˆ¶æŒ‰é’® -->
	</div>
  </div>

  
 <!-- <button id="askBtn">å¬å”¤ç­”æ¡ˆ</button> -->
  <div id="answerArea"></div>

	<audio id="clickSound" src="./voice/å­çŠ¬ã‚„å­çŒ«ã®æ­©ãéŸ³.mp3" preload="auto"></audio>
    <script src="script.js"></script>
  
  <!-- èƒŒæ™¯éŸ³ä¹æ’­æ”¾å™¨ï¼ˆè‡ªåŠ¨æ’­æ”¾ + å¯æ‰‹åŠ¨æ§åˆ¶ï¼‰ -->
	<audio id="bg-music" src="./voice/bg.mp3" loop></audio>
  
  <!-- é¡µé¢åº•éƒ¨æˆ–bodyæœ«å°¾æ”¾è¿™ä¸ªdiv -->
  <div id="cat-pet" title="ç‚¹å‡»å°çŒ«å’Œæˆ‘èŠå¤©å§ï¼">
    <img id="cat-img" src="./img/mao1.png" alt="å°çŒ«" />
    <div id="cat-bubble" class="hidden">æ¬¢è¿ä½ å–µï½</div>
  </div>
  
  <script>
    (function(){
      const catPet = document.getElementById("cat-pet");
      const catImg = document.getElementById("cat-img");
      const catBubble = document.getElementById("cat-bubble");
  
      // é¢„è®¾å¯¹è¯ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
      const greetings = [
        "æ¬¢è¿å›å®¶ï¼Œä¸»äººå–µï½",
        "ä»Šå¤©ä¹Ÿè¦åŠ æ²¹å–µï¼",
        "å°çŒ«åœ¨è¿™é‡Œé™ªä½ ï¼",
        "æƒ³æˆ‘äº†å—ï¼Ÿå–µï½",
		"ä»Šå¤©è¦åšç‚¹ä»€ä¹ˆå‘¢(*^â–½^*)ï¼Ÿ",
        "å–µå‘œï¼Œå¼€å§‹äº’åŠ¨å§ï¼"
      ];
  
      const randomChats = [
        { text: "æ±ªï¼Ÿæˆ‘æ˜¯ä¸€åªå°çŒ«å–µï½", img: "./img/mao3.png" },
		{ text: "å¥½â€”â€”æ— â€”â€”èŠâ€”â€”å•Šâ€”â€”â€”â€”(:[___]", img: "./img/mao3.png" },
        { text: "å¥½å‰å®³ï¼Œç»§ç»­åŠªåŠ›å£å‘€ï¼", img: "./img/mao4.png" },
		{ text: "æˆ‘æ˜¯å‰ç¥¥ç‰©å–µ~o( =âˆ©Ï‰âˆ©= )m", img: "./img/mao4.png" },
        { text: "å†é—®æˆ‘ä¸€æ¬¡è¯•è¯•çœ‹ï¼", img: "./img/mao2.png" },
        { text: "å–µ~ è¿™æ˜¯ä¸ªå¥½é—®é¢˜ï¼(âœªÏ‰âœª)", img: "./img/mao4.png" },
		{ text: "æœ‰é—®é¢˜å°½ç®¡é—®æˆ‘å–µï¼", img: "./img/mao4.png" },
		{ text: "èƒ¡è¨€ä¹±è¯­ï¼Ÿï¼å””â€¦â€¦æ‰ä¸æ˜¯å–µï¼ï¼", img: "./img/mao5.png" },
        { text: "å“¼å“¼ï¼Œæˆ‘å¬è§äº†å‘¢ï¼ï¿£ã¸ï¿£", img: "./img/mao3.png" },
        { text: "æˆ‘æ¥åŠ›ï¼", img: "./img/mao2.png" }
      ];
  
      const answerReplies = [
        "ç­”æ¡ˆå·²å‡ºç‚‰ï¼ŒèŒèŒçŸ¥æ™“ï¼",
        "å°çŒ«ç»™ä½ é¼“æŒğŸ‘",
        "ç»“æœå‡ºæ¥å•¦ï¼ŒæœŸå¾…å§ï¼",
        "èŒèŒè§‰å¾—ä¸é”™å–µï¼",
        "å–µï½ç­”æ¡ˆæ¥äº†ï¼Œå¿«çœ‹ï¼",
		"ç­”æ¡ˆä¸å¥½çš„è¯å¿½ç•¥å®ƒå°±å¥½äº†å–µ"
      ];
  
      // æ˜¾ç¤ºæ°”æ³¡æ–‡æœ¬ï¼Œè‡ªåŠ¨éšè—
      function showBubble(text) {
        catBubble.textContent = text;
        catBubble.classList.add("visible");
        clearTimeout(catBubble._timeout);
        catBubble._timeout = setTimeout(() => {
          catBubble.classList.remove("visible");
        }, 4000);
      }
  
      // é¡µé¢æ‰“å¼€æ—¶æ¬¢è¿ä¸€å¥
      window.addEventListener("load", () => {
        const greet = greetings[Math.floor(Math.random() * greetings.length)];
        showBubble(greet);
      });
  
      // ç‚¹å‡»å°çŒ«è§¦å‘éšæœºå¯¹è¯ï¼Œå¹¶åˆ‡æ¢çŒ«å›¾ï¼ˆå¦‚æœå®šä¹‰äº†ï¼‰
      catPet.addEventListener("click", () => {
        const chat = randomChats[Math.floor(Math.random() * randomChats.length)];
        showBubble(chat.text);
        if(chat.img){
          catImg.src = chat.img;
        }
        // 1ç§’åæ¢å¤åŸå›¾
        setTimeout(() => {
          catImg.src = "./img/mao1.png";
        }, 1000);
      });
  
      // ç›‘å¬ä½ é¡µé¢â€œç­”æ¡ˆç”Ÿæˆâ€äº‹ä»¶ï¼Œè¿™é‡Œç»™ä¸ªè§¦å‘ç¤ºèŒƒ
      // ä½ å®é™…ç”¨æ—¶ï¼Œåªéœ€è°ƒç”¨triggerAnswerReply()å³å¯
      window.triggerAnswerReply = function(){
        // 40%å‡ ç‡è§¦å‘ç­”æ¡ˆå¯¹è¯
        if(Math.random() < 0.4){
          const reply = answerReplies[Math.floor(Math.random() * answerReplies.length)];
          showBubble(reply);
        }
      }
    })();
	
	
	// è·å–éŸ³ä¹å…ƒç´ ä¸æŒ‰é’®
	const bgMusic = document.getElementById('bg-music');
	const toggleBtn = document.getElementById('music-toggle');
	let musicPlaying = false;
	  
	// å¤„ç†è‡ªåŠ¨æ’­æ”¾ï¼ˆéœ€ç”¨æˆ·äº’åŠ¨åæ‰èƒ½ç”Ÿæ•ˆï¼‰
	window.addEventListener('DOMContentLoaded', () => {
	  const startMusic = () => {
	    bgMusic.play().then(() => {
	      musicPlaying = true;
	      toggleBtn.textContent = 'ğŸ”Š';
	    }).catch((e) => {
	      // è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½å› æµè§ˆå™¨é™åˆ¶ï¼Œç­‰å¾…ç”¨æˆ·ç‚¹å‡»é¡µé¢
	      toggleBtn.textContent = 'ğŸ”ˆ';
	    });
	  };
	  
	  // å°è¯•æ’­æ”¾éŸ³ä¹
	  startMusic();
	  
	  // ç¡®ä¿ç”¨æˆ·äº¤äº’åå†å°è¯•æ’­æ”¾ï¼ˆæŸäº›æµè§ˆå™¨è¦æ±‚ï¼‰
	  document.body.addEventListener('click', startMusic, { once: true });
	});
	  
	// ç‚¹å‡»æŒ‰é’®æ§åˆ¶éŸ³ä¹æ’­æ”¾/æš‚åœ
	toggleBtn.addEventListener('click', () => {
	  if (musicPlaying) {
	    bgMusic.pause();
	    toggleBtn.textContent = 'ğŸ”ˆ';
	    musicPlaying = false;
	  } else {
	    bgMusic.play();
	    toggleBtn.textContent = 'ğŸ”Š';
	    musicPlaying = true;
	  }
	});
  </script>

</body>
</html>
