// 家庭成员称呼关键词，用于判断爱/喜欢要用100%肯定答案
const familyKeywords = ["妈妈", "爸爸", "爷爷","奶奶","姥姥","姥爷","外公","外婆","爸", "妈", "姐姐", "哥哥", "弟弟", "妹妹", "家人", "亲人"];

// 每个关键词的答案池
// 对“爱”和“喜欢”分两组：肯定+少量中性（85%肯定），100%肯定（针对家庭成员称呼）
// “想”关键词分肯定60%，其他40%稍微犹豫或中立
// 其他关键词默认30条，风格均匀分布

const answerBank = {
  "未来": [
    "未来喵~是属于你的秘密基地呦！",
    "瞧~未来正在偷偷向你眨眼哦！",
    "放心啦，未来会像小太阳一样温暖你！",
    "未来的轨迹被星光标记了，快去找它吧！",
    "未来喵～就是你萌萌的冒险乐园！",
    "明天的萌芽正在发芽，萌力爆棚！",
    "未来是你的小喵伴侣，一起探索吧！",
    "勇敢迈步，未来会变得更加柔软哦～",
    "未来的秘密藏在你心里喵～",
    "未来不会辜负用心的小喵！",
    "别担心，未来的萌光会指引你！",
    "未来是神秘的萌电波，正在靠近！",
    "即使迷茫，未来依然充满希望！",
    "未来的萌萌力量，会帮你跨越难关！",
    "未来会像彩虹一样美丽，等待你喵～",
    "未来隐藏在微笑里，快去寻找！",
    "未来的萌光永远不会熄灭！",
    "勇敢前行，未来正闪耀着光芒！",
    "未来的秘密是萌萌的冒险故事！",
    "萌萌告诉你，未来很可爱哟！",
    "未来不会让萌萌的小你失望！",
    "未来的路上满是星光和惊喜！",
    "未来的电波正在轻轻震动！",
    "未来是萌力的聚集地，别错过！",
    "未来是无限可能的小宇宙！",
    "未来的秘密在你的手心里！",
    "未来是萌萌的魔法，静静等待绽放！",
    "未来如梦似幻，但是真的存在！",
    "未来充满萌萌的期待和惊喜！",
    "未来是萌萌的故事书，等你翻开！",
    "未来就像软软的棉花糖，甜甜的！"
  ],

  // “爱”关键词，肯定85%，中性15%
  // 另外给一个100%肯定的家庭成员专用答案池
  "爱": {
    normal: [
      "爱喵～永远在你心里跳动！",
      "你被萌萌的爱包围啦，喵呜～",
      "爱是甜甜的糖果，来尝一口吧！",
      "爱是心中最萌的魔法力量！",
      "肯定的，爱一直在萌萌地守护你！",
      "爱是温暖的电波，永不间断！",
      "喵呜～你已经被满满的爱包围了！",
      "爱是软软的小星星，闪闪发光呢！",
      "爱是无敌的萌神力量，冲鸭！",
      "肯定的！爱让你变得更加勇敢！",
      // 以下5条稍中性，避免死板
      "有时候爱像风，轻轻拂过心头。",
      "爱是萌萌的魔法，有时神秘莫测。",
      "爱可能藏在你的微笑里喵～",
      "有些爱需要时间来证明它的模样。",
      "爱是一种萌萌的等待和守护。"
    ],
    family: [
      "爱喵！家人的爱永远不变！",
      "家人的爱是萌萌的坚强后盾！",
      "家庭的爱就像温暖的小太阳！",
      "家人的爱让你无所畏惧！",
      "你是家人眼中的小宝贝，充满爱！",
      "家人的爱是永恒不灭的萌光！",
      "家人的爱像软绵绵的棉花糖！",
      "家人的爱让你勇敢无敌！",
      "家人的爱是最萌的力量源泉！",
      "家人的爱陪你萌萌成长！",
      "你永远被家人的爱紧紧包围！",
      "家人的爱是你最强的萌盾牌！",
      "家人爱你，就像萌神守护你！",
      "无论何时，家人的爱都在！",
      "家人的爱像星星一样闪亮！",
      "你是家人最珍贵的萌宝！",
      "家人的爱给予你无限勇气！",
      "家人永远是你最温暖的港湾！",
      "家人的爱是生命中最萌的光！",
      "爱家人，就像萌萌守护你一样！",
      "家人的爱像萌萌的魔法，永远存在！",
      "家人的爱让你绽放萌萌的光芒！",
      "家人的爱是你最坚实的力量！",
      "你是家人永远的萌神宠儿！",
      "家人的爱给你满满的安全感！",
      "家人的爱是你永远的萌萌后盾！",
      "爱家人，萌萌也爱你呦！",
      "家人的爱是萌萌的奇迹！",
      "家人的爱，是你最暖的萌光！",
      "爱家人，是萌萌的使命！"
    ]
  },

  // “喜欢”关键词，同样分normal和family两个池，85%肯定和100%肯定比例
  "喜欢": {
    normal: [
      "喜欢就是心里跳动的小兔子喵！",
      "你喜欢的，都是最萌的宝贝！",
      "喜欢是一种甜甜的电波，传给你！",
      "肯定的，喜欢让一切都充满颜色！",
      "喜欢是风中的小喵，轻轻拥抱你！",
      "喜欢是心里的小花，天天盛开！",
      "你喜欢的，萌萌都明白哒！",
      "喜欢让每一天都像泡泡糖一样甜！",
      "肯定的，喜欢是萌萌的魔法！",
      "喜欢是永不消失的软萌光芒！",
      // 5条稍中性
      "喜欢有时像风，随时轻轻来访。",
      "有些喜欢藏在你不经意的眼神里。",
      "喜欢是一种温柔的萌萌电波。",
      "喜欢需要时间来酝酿喵～",
      "喜欢让萌萌的心跳更欢快。"
    ],
    family: [
      "喜欢家人，就是萌萌的幸福！",
      "家人的喜欢是无尽的温暖！",
      "喜欢家人，让心更柔软喵～",
      "家人的喜欢是萌萌的力量源泉！",
      "你被家人喜欢，超级幸福喵！",
      "喜欢家人，就像萌萌守护你一样！",
      "家人的喜欢是最美的萌光！",
      "喜欢家人，萌萌一直陪伴！",
      "你是家人最喜欢的小喵！",
      "家人的喜欢让你心暖暖！",
      "喜欢家人，是萌萌的秘密力量！",
      "家人的喜欢是你最坚强的萌盾！",
      "你永远被家人喜欢着！",
      "喜欢家人，萌萌感同身受！",
      "家人的喜欢让你变得更可爱！",
      "喜欢家人，是最纯真的萌感情！",
      "家人的喜欢像星星一样闪耀！",
      "你是家人最喜欢的宝贝！",
      "家人的喜欢让你勇气倍增！",
      "喜欢家人，萌萌也深深爱着你！",
      "家人的喜欢是你最强萌盾牌！",
      "你是家人眼中最萌的宝藏！",
      "喜欢家人，萌萌祝福你！",
      "家人的喜欢是萌萌最美的魔法！",
      "喜欢家人，让你更闪耀萌光！",
      "家人的喜欢给你满满勇气！",
      "喜欢家人，是萌萌的力量源泉！",
      "你是家人永远喜欢的萌宠！",
      "家人的喜欢是你最暖的萌光！"
    ]
  },

  "要": [
    "当然要啦！萌力全开！",
    "要的喵，勇敢追梦吧！",
    "要是你想，答案就是肯定！",
    "喵～要是你准备好了，马上出发！",
    "肯定要的啦，不用犹豫！",
    "要是觉得难，也别怕，萌萌陪你！",
    "要的啦，未来在招手！",
    "嗯，要的，不过也要小心喵～",
    "其实这次可能不太要，注意下呦～",
    "20%的否定喵，这次可能不太适合！",
    "想要什么就去追，萌萌支持你！",
    "要是你坚持，就会成功喵！",
    "要的！机会不会等人喵～",
    "勇敢说出你的要，萌萌听着呢！",
    "要的答案藏在你心里，去寻找！",
    "这次不太要，调整再来喵～",
    "要的可能性很大，别放弃！",
    "你要的萌萌帮你实现！",
    "这次可能不适合，要多考虑喵！",
    "要的答案和努力一样重要！",
    "要的让萌萌都兴奋了！",
    "放胆去要，萌萌会帮你加油！",
    "可能不太要，但也别气馁！",
    "要的路上有萌萌陪伴！",
    "这次要得，机会来了喵！",
    "不要怕，要的总会实现！",
    "要的光芒会照亮你的路！",
    "可能不太要，这次先稳住！",
    "要的让萌萌眼睛发亮！",
    "别犹豫，要的正在靠近！"
  ],

  "命运": [
    "命运喵~不是偶然，是萌萌的安排啦！",
    "喵呜～命运之线在你手中轻轻摆动！",
    "命运是条可爱的丝线，咱们一起理理它！",
    "不要怕，命运有时就是调皮的萌神！",
    "萌萌的命运告诉你，努力会发光哦！",
    "命运的轨迹闪烁着可爱的小星星！",
    "命运是心里的萌萌电波，感应中！",
    "命运也喜欢偶尔开个小玩笑喵～",
    "命运喵，带你踏上神秘旅程！",
    "听从萌萌的命运指南针，没错！",
    "命运会带来惊喜和挑战，萌萌陪你！",
    "命运的萌萌力量帮你开启新篇章！",
    "命运有时候像萌萌的谜语，值得探索！",
    "命运是星光下最闪亮的萌神！",
    "命运让萌萌的你变得无敌！",
    "命运是软软的云朵，带你飞翔！",
    "跟随命运的萌萌节奏，舞动起来！",
    "命运是萌萌的奇迹，等你发现！",
    "命运不会辜负每一个萌萌的努力！",
    "命运是你最萌的伙伴，别害怕！",
    "命运的萌光永远照亮你的前路！",
    "命运像萌萌的电波，传递勇气！",
    "命运是萌萌的故事书，写下精彩！",
    "命运像萌萌的魔法，神秘又可爱！",
    "命运带着萌萌的祝福，与你同行！",
    "命运的萌光闪耀不停，陪伴你！",
    "命运让萌萌的你成为最闪亮的星！",
    "命运是萌萌的魔法，开启奇迹！",
    "命运是萌萌的祝福，永远陪伴！",
    "命运给你满满萌力，加油喵！"
  ],

  "真理": [
    "真理是隐形的萌光，闭眼也能感受到！",
    "喵呜～真理就是糖果，甜甜的又神秘！",
    "真理在风里跳舞，快张开耳朵听！",
    "真理是小星星的秘密语言，嘘～",
    "真理有点调皮，但总是陪伴你呢！",
    "真理是萌萌的钥匙，打开神秘之门！",
    "真理藏在你心底的小秘密里！",
    "真理是无声的萌电波，感受它吧！",
    "真理让萌萌的你更加闪耀！",
    "追寻真理，萌神会指引你！",
    "真理是萌萌的光芒，温暖你心！",
    "真理像软软的云朵，轻轻包围你！",
    "真理是萌萌的魔法，神秘又可爱！",
    "真理让你看到隐藏的萌光！",
    "真理是萌萌的探险地图，跟着走！",
    "真理是你心中最萌的秘密！",
    "真理是萌萌的希望之星！",
    "真理是萌萌的电波，传递能量！",
    "真理藏在萌萌的笑容里！",
    "真理是软萌的力量，陪你成长！",
    "真理像星星一样闪闪发光！",
    "真理是萌萌的奇迹，等待发现！",
    "真理是你萌萌的指南针！",
    "真理在萌萌的世界里发光！",
    "真理是萌萌的魔法棒，点亮你！",
    "真理是萌萌的星光大道，走下去！",
    "真理是你萌萌的宝藏！",
    "真理是萌萌的力量源泉！",
    "真理让你萌萌地闪耀！",
    "真理是萌萌的秘密花园！"
  ],

  "能": [
    "当然能啦，萌力无限！",
    "你能做到的，喵呜～",
    "能力值爆表，放心大胆去！",
    "萌萌相信你能行！",
    "能的！就算很难，也一定能！",
    "能喵，但别忘了休息哦～",
    "这次可能不太能，但不要气馁！",
    "80%肯定，20%否定喵，这次你能！",
    "这次稍微难点，但还是能完成的！",
    "抱歉，这次可能暂时不能喵。",
    "能力爆棚，萌萌为你加油！",
    "你是萌萌的能量源泉！",
    "能的，只要你愿意喵～",
    "萌萌相信你是最棒的！",
    "你能创造奇迹，放心大胆去！",
    "这次可能有点难，注意调整喵！",
    "你有潜力，萌萌看好你！",
    "能力满满，勇敢前行吧！",
    "这次可能不太能，但别灰心！",
    "萌萌支持你能做到！",
    "你能成为最闪亮的萌神！",
    "能的！萌萌一直陪伴！",
    "可能稍难，但你能突破！",
    "萌萌的信念为你加持！",
    "这次可能不太能，但未来可期！",
    "能的，萌萌绝对相信你！",
    "你拥有萌萌的无限潜能！",
    "只要坚持，能量满满！",
    "这次可能难点，但一定能！",
    "相信萌萌，也相信自己！"
  ],

  "好": [
    "当然好啦，萌力全开！",
    "好得不得了，安心啦！",
    "好极了，萌萌都点赞！",
    "肯定好，快去享受吧！",
    "80%的好，20%可能不太好喵～",
    "嗯，还是好啦，但要小心点～",
    "这次可能不太好，注意喵！",
    "大部分情况都好，萌萌陪你！",
    "好喵！你会很开心的！",
    "抱歉，这次可能不太好，慢慢来。",
    "好得像甜甜的棉花糖，超级舒服！",
    "你做得好极了，萌萌为你鼓掌！",
    "一切都好，别担心喵～",
    "好是萌萌的祝福，送给你！",
    "这次稍微不太好，注意休息！",
    "好得像阳光，温暖又明亮！",
    "你表现很好，萌萌骄傲！",
    "可能有点不太好，但你很努力！",
    "好喵！信心满满向前冲！",
    "这次可能不太顺利，别放弃！",
    "好是萌萌的魔法，帮你加油！",
    "你做得超级好，萌萌支持！",
    "大部分都好，继续加油！",
    "这次可能有点难，先稳住！",
    "好得像花开一样美丽！",
    "你表现得很好，萌萌在你身边！",
    "可能这次不太好，别气馁！",
    "好是萌萌的力量源泉！",
    "一切都会好起来的，放心！",
    "好是萌萌的心意，送给你！"
  ],

  "怎么样": [
    "很好很棒，萌萌都开心！",
    "怎么样都可爱，放心！",
    "80%肯定的萌力，绝对OK！",
    "怎么样都不怕，萌神保护你！",
    "这次可能不太怎么样，注意呦～",
    "怎么样都要相信自己喵！",
    "怎么样都行，尽情发挥！",
    "大部分情况都怎么样，你能行！",
    "这次可能不怎么样，但别灰心！",
    "抱歉，这次可能不怎么样喵。",
    "怎么样都像糖果一样甜！",
    "你问怎么样？萌萌说超级棒！",
    "怎么样都萌萌的，别担心！",
    "80%肯定，信心满满！",
    "可能稍微不太好，但还行！",
    "怎么样都很可爱，继续加油！",
    "这次不怎么样，没关系喵～",
    "怎么样都好，萌萌支持你！",
    "你很棒，怎么样都行！",
    "这次可能不太顺，先稳住！",
    "怎么样都萌萌的奇迹！",
    "你问怎么样？答案是棒呆了！",
    "怎么样都很有萌力，别担心！",
    "大部分都好，继续加油！",
    "这次稍微不怎么样，注意休息！",
    "怎么样都闪耀，萌萌陪你！",
    "你做得不错，怎么样都好！",
    "可能不怎么样，但还会好的！",
    "怎么样都美好，别放弃！",
    "怎么样都萌萌的魔法！"
  ],

  // “想”关键词，60%肯定，40%犹豫/中立
  "想": [
    "想喵～梦想会慢慢实现！",
    "你的想法萌萌觉得很棒！",
    "想是萌萌的翅膀，带你飞翔！",
    "想要的未来，会慢慢靠近！",
    "萌萌觉得你想得很对！",
    "想像力是最萌的魔法！",
    "想要的事，萌萌帮你加油！",
    "有时候想太多也没关系喵～",
    "想象是萌萌的秘密花园！",
    "想是一种萌萌的力量！",
    // 以下12条稍犹豫或中立
    "想法有时候需要慢慢理清喵～",
    "想是萌萌的谜题，等待你解答！",
    "有时候想多了，心会软软的～",
    "想是萌萌的星光，有时会闪烁！",
    "想法会随着时间变得清晰喵！",
    "想也许会变成惊喜，别急！",
    "萌萌知道，有时想会让你困惑！",
    "想是萌萌的冒险，勇敢试试吧！",
    "偶尔想歪了，萌萌也会笑喵～",
    "想是软软的云朵，变幻莫测！",
    "有些想法，慢慢来，萌萌支持！",
    "想是萌萌的小秘密，等你发现！",
    "想像力是最萌的魔法宝盒！",
    "想是萌萌的电波，传递期待！",
    "想法慢慢明朗，萌萌陪你！",
    "想也是一种萌萌的成长！",
    "有时想会让你更坚强喵！",
    "萌萌觉得想法很有趣！",
    "想是萌萌的小太阳，温暖你心！",
    "想法是萌萌的花园，慢慢绽放！"
  ]
};

// 默认答案池（没匹配关键词时）
const defaultAnswers = [
  "喵～答案正在萌萌地生成中，请稍等！",
  "未知的秘密正悄悄告诉你哟！",
  "答えは風の中にあります、にゃん。",
  "神秘的电波告诉我，这个问题值得深思～",
  "萌萌的答案正在从星星掉落！",
  "未来由你书写，小喵支持你！",
  "咕噜咕噜，答案正在热腾腾地出锅~",
  "偶尔迷路没关系，萌萌陪你一起找！",
  "答案藏在软软的云朵里，等你去抓~",
  "萌萌的电波传送完成，请查收你的答案！"
];

// 获取页面元素
const askBtn = document.getElementById("askBtn");
const questionInput = document.getElementById("questionInput");
const answerArea = document.getElementById("answerArea");
const clickSound = document.getElementById("clickSound");

// 打字机效果：逐字显示文本
function typeWriter(text, element, speed = 50) {
  element.textContent = "";
  let i = 0;
  function typing() {
    if (i < text.length) {
      element.textContent += text.charAt(i);
      i++;
      setTimeout(typing, speed);
    }
  }
  typing();
}

// 判断问题中是否包含任何家庭成员称呼
function containsFamilyKeyword(text) {
  for (const famKey of familyKeywords) {
    if (text.includes(famKey)) {
      return true;
    }
  }
  return false;
}

// 按钮点击事件
askBtn.addEventListener("click", () => {
  const question = questionInput.value.trim();

  // 播放点击音效
  clickSound.currentTime = 0;
  clickSound.play();

  if (!question) {
    answerArea.textContent = "提出你的疑问喵。";
    answerArea.classList.add("visible");
    return;
  }

  answerArea.classList.remove("visible");
  answerArea.textContent = "";

  setTimeout(() => {
    const questionLower = question.toLowerCase();

    let matchedAnswers = null;

    // 先判断是否是“爱”或“喜欢”，并检测家庭成员称呼
    if (question.includes("爱") || question.includes("喜欢")) {
      const isFamily = containsFamilyKeyword(question);
      if (question.includes("爱")) {
        matchedAnswers = isFamily ? answerBank["爱"].family : answerBank["爱"].normal;
      } else if (question.includes("喜欢")) {
        matchedAnswers = isFamily ? answerBank["喜欢"].family : answerBank["喜欢"].normal;
      }
    } else {
      // 普通匹配其他关键词
      for (const key in answerBank) {
        // 排除爱和喜欢（已判断过）
        if (key === "爱" || key === "喜欢") continue;
        if (questionLower.includes(key)) {
          matchedAnswers = answerBank[key];
          break;
        }
      }
    }

    if (!matchedAnswers) {
      matchedAnswers = defaultAnswers;
    }

    // 随机选一个答案
    const idx = Math.floor(Math.random() * matchedAnswers.length);
    const selectedAnswer = matchedAnswers[idx];

    answerArea.classList.add("visible");
    typeWriter(selectedAnswer, answerArea, 50);
  }, 1200);
});


// (>^ω^<)
// JS 部分：按钮点击时飘出猫爪动画
askBtn.addEventListener("click", (e) => {
  // 获取按钮位置，作为猫爪起点
  const rect = askBtn.getBoundingClientRect();

  // 创建猫爪元素
  const paw = document.createElement("span");
  paw.textContent = "🐾";
  paw.classList.add("flying-paw");

  // 位置定位到按钮中心
  paw.style.left = (rect.left + rect.width / 2) + "px";
  paw.style.top = (rect.top + rect.height / 2) + "px";

  document.body.appendChild(paw);

  // 动画结束后移除元素
  paw.addEventListener("animationend", () => {
    paw.remove();
  });
});



